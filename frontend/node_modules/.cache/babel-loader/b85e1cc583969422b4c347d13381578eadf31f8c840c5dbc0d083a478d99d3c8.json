{"ast":null,"code":"import { ref, watch, computed, onMounted, nextTick } from \"vue\";\nimport { a as BvTriggerableEvent } from \"./classes-IC0yVJlq.mjs\";\nimport { e as useEventListener } from \"./index-BgXbxfV9.mjs\";\nconst fadeBaseTransitionProps = {\n  name: \"fade\",\n  enterActiveClass: \"\",\n  enterFromClass: \"showing\",\n  enterToClass: \"\",\n  leaveActiveClass: \"\",\n  leaveFromClass: \"\",\n  leaveToClass: \"showing\",\n  css: true\n};\nconst useShowHide = (modelValue, props, emit, element, computedId, options = {\n  transitionProps: {},\n  showFn: () => {},\n  hideFn: () => {}\n}) => {\n  let noAction = false;\n  const initialShow = !!modelValue.value && !props.initialAnimation || props.visible || false;\n  const showRef = ref(initialShow);\n  const renderRef = ref(initialShow);\n  const renderBackdropRef = ref(initialShow);\n  let isCountdown = typeof modelValue.value !== \"boolean\";\n  watch(modelValue, () => {\n    isCountdown = typeof modelValue.value !== \"boolean\";\n    if (noAction) {\n      noAction = false;\n      return;\n    }\n    if (modelValue.value) {\n      show();\n    } else {\n      hide();\n    }\n  });\n  const localNoAnimation = ref(initialShow);\n  const computedNoAnimation = computed(() => props.noAnimation || props.noFade || localNoAnimation.value || false);\n  onMounted(() => {\n    if (props.visible || !props.show && initialShow) {\n      localNoAnimation.value = true;\n      if (!modelValue.value) {\n        noAction = true;\n        modelValue.value = true;\n      }\n      nextTick(() => {\n        isVisible.value = true;\n        backdropVisible.value = true;\n        backdropReady.value = true;\n        show();\n      });\n    } else if (props.show || !!modelValue.value && props.initialAnimation) {\n      show();\n    }\n  });\n  watch(() => props.visible, newval => {\n    localNoAnimation.value = true;\n    nextTick(() => {\n      if (newval) isVisible.value = true;\n      if (newval) {\n        show();\n      } else {\n        hide();\n      }\n    });\n  });\n  watch(() => props.show, newval => {\n    if (newval) {\n      show();\n    } else {\n      hide();\n    }\n  });\n  useEventListener(element, \"bv-toggle\", () => {\n    modelValue.value = !modelValue.value;\n  });\n  const buildTriggerableEvent = (type, opts = {}) => new BvTriggerableEvent(type, {\n    cancelable: false,\n    target: (element == null ? void 0 : element.value) || null,\n    relatedTarget: null,\n    trigger: null,\n    ...opts,\n    componentId: computedId == null ? void 0 : computedId.value\n  });\n  let showTimeout;\n  const show = () => {\n    if (showRef.value) return;\n    const event = buildTriggerableEvent(\"show\", {\n      cancelable: true\n    });\n    emit(\"show\", event);\n    if (event.defaultPrevented) {\n      emit(\"show-prevented\", buildTriggerableEvent(\"show-prevented\"));\n      if (isVisible.value) {\n        isVisible.value = false;\n      }\n      if (modelValue.value && !isCountdown) {\n        noAction = true;\n        nextTick(() => {\n          modelValue.value = false;\n        });\n      }\n      return;\n    }\n    renderRef.value = true;\n    renderBackdropRef.value = true;\n    requestAnimationFrame(() => {\n      var _a;\n      showTimeout = setTimeout(() => {\n        var _a2;\n        showRef.value = true;\n        (_a2 = options.showFn) == null ? void 0 : _a2.call(options);\n        if (!modelValue.value) {\n          noAction = true;\n          nextTick(() => {\n            modelValue.value = true;\n          });\n        }\n      }, localNoAnimation.value ? 0 : typeof props.delay === \"number\" ? props.delay : ((_a = props.delay) == null ? void 0 : _a.show) || 0);\n    });\n  };\n  const hide = trigger => {\n    var _a;\n    if (!showRef.value) return;\n    const event = buildTriggerableEvent(\"hide\", {\n      cancelable: true,\n      trigger\n    });\n    const event2 = buildTriggerableEvent(trigger || \"ignore\", {\n      cancelable: true,\n      trigger\n    });\n    if (trigger === \"backdrop\" && props.noCloseOnBackdrop || trigger === \"esc\" && props.noCloseOnEsc) {\n      emit(\"hide-prevented\", buildTriggerableEvent(\"hide-prevented\"));\n      return;\n    }\n    if (showTimeout) {\n      clearTimeout(showTimeout);\n      showTimeout = void 0;\n    }\n    if (trigger) {\n      emit(trigger, event2);\n    }\n    emit(\"hide\", event);\n    if (event.defaultPrevented || event2.defaultPrevented) {\n      emit(\"hide-prevented\", buildTriggerableEvent(\"hide-prevented\"));\n      noAction = true;\n      nextTick(() => {\n        modelValue.value = true;\n      });\n      return;\n    }\n    setTimeout(() => {\n      var _a2;\n      showRef.value = false;\n      (_a2 = options.hideFn) == null ? void 0 : _a2.call(options);\n      if (modelValue.value) {\n        noAction = true;\n        modelValue.value = isCountdown ? 0 : false;\n      }\n    }, localNoAnimation.value ? 0 : typeof props.delay === \"number\" ? props.delay : ((_a = props.delay) == null ? void 0 : _a.hide) || 0);\n  };\n  const toggle = () => {\n    const e = buildTriggerableEvent(\"toggle\", {\n      cancelable: true\n    });\n    emit(\"toggle\", e);\n    if (e.defaultPrevented) {\n      emit(\"toggle-prevented\", buildTriggerableEvent(\"toggle-prevented\"));\n      return;\n    }\n    if (showRef.value) {\n      hide();\n    } else {\n      show();\n    }\n  };\n  const lazyLoadCompleted = ref(false);\n  const markLazyLoadCompleted = () => {\n    if (props.lazy === true) lazyLoadCompleted.value = true;\n  };\n  const isLeaving = ref(false);\n  const isActive = ref(false);\n  const isVisible = ref(false);\n  const onBeforeEnter = el => {\n    var _a, _b, _c, _d;\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onBeforeEnter) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onBeforeEnter) == null ? void 0 : _d.call(_c, el);\n    isActive.value = true;\n  };\n  const onEnter = el => {\n    var _a, _b, _c, _d;\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        isVisible.value = true;\n      });\n    });\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onEnter) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onEnter) == null ? void 0 : _d.call(_c, el);\n  };\n  const onAfterEnter = el => {\n    var _a, _b, _c, _d;\n    emit(\"shown\", buildTriggerableEvent(\"shown\"));\n    markLazyLoadCompleted();\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onAfterEnter) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onAfterEnter) == null ? void 0 : _d.call(_c, el);\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false;\n      });\n    }\n  };\n  const onBeforeLeave = el => {\n    var _a, _b, _c, _d;\n    isLeaving.value = true;\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onBeforeLeave) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onBeforeLeave) == null ? void 0 : _d.call(_c, el);\n  };\n  const onLeave = el => {\n    var _a, _b, _c, _d;\n    isVisible.value = false;\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onLeave) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onLeave) == null ? void 0 : _d.call(_c, el);\n  };\n  const onAfterLeave = el => {\n    var _a, _b, _c, _d;\n    emit(\"hidden\", buildTriggerableEvent(\"hidden\"));\n    (_b = (_a = options.transitionProps) == null ? void 0 : _a.onAfterLeave) == null ? void 0 : _b.call(_a, el);\n    (_d = (_c = props.transitionProps) == null ? void 0 : _c.onAfterLeave) == null ? void 0 : _d.call(_c, el);\n    isLeaving.value = false;\n    isActive.value = false;\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false;\n      });\n    }\n    requestAnimationFrame(() => {\n      renderRef.value = false;\n    });\n  };\n  const contentShowing = computed(() => isActive.value === true || props.lazy === false || props.lazy === true && lazyLoadCompleted.value === true && props.unmountLazy === false);\n  const trapActive = ref(false);\n  watch(isVisible, val => {\n    setTimeout(() => {\n      trapActive.value = val;\n    }, 32);\n  });\n  const backdropVisible = ref(false);\n  const backdropReady = ref(false);\n  const transitionFunctions = {\n    ...options.transitionProps,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave\n  };\n  return {\n    showRef,\n    renderRef,\n    renderBackdropRef,\n    isVisible,\n    isActive,\n    trapActive,\n    show,\n    hide,\n    toggle,\n    buildTriggerableEvent,\n    computedNoAnimation,\n    localNoAnimation,\n    isLeaving,\n    transitionProps: {\n      ...fadeBaseTransitionProps,\n      ...props.transitionProps,\n      ...transitionFunctions\n    },\n    lazyLoadCompleted,\n    markLazyLoadCompleted,\n    contentShowing,\n    backdropReady,\n    backdropVisible,\n    backdropTransitionProps: {\n      ...fadeBaseTransitionProps,\n      onBeforeEnter: () => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            backdropVisible.value = true;\n          });\n        });\n        backdropReady.value = false;\n      },\n      onAfterEnter: () => {\n        backdropReady.value = true;\n      },\n      onBeforeLeave: () => {\n        backdropVisible.value = false;\n      },\n      onAfterLeave: () => {\n        backdropReady.value = false;\n        requestAnimationFrame(() => {\n          renderBackdropRef.value = false;\n        });\n      }\n    }\n  };\n};\nexport { useShowHide as u };","map":{"version":3,"names":["fadeBaseTransitionProps","name","enterActiveClass","enterFromClass","enterToClass","leaveActiveClass","leaveFromClass","leaveToClass","css","useShowHide","modelValue","props","emit","element","computedId","options","transitionProps","showFn","hideFn","noAction","initialShow","value","initialAnimation","visible","showRef","ref","renderRef","renderBackdropRef","isCountdown","watch","show","hide","localNoAnimation","computedNoAnimation","computed","noAnimation","noFade","onMounted","nextTick","isVisible","backdropVisible","backdropReady","newval","useEventListener","buildTriggerableEvent","type","opts","BvTriggerableEvent","cancelable","target","relatedTarget","trigger","componentId","showTimeout","event","defaultPrevented","requestAnimationFrame","setTimeout","_a2","call","delay","_a","event2","noCloseOnBackdrop","noCloseOnEsc","clearTimeout","toggle","e","lazyLoadCompleted","markLazyLoadCompleted","lazy","isLeaving","isActive","onBeforeEnter","el","_b","_d","_c","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","contentShowing","unmountLazy","trapActive","val","transitionFunctions","backdropTransitionProps"],"sources":["../src/composables/useShowHide.ts"],"sourcesContent":["import {computed, type EmitFn, nextTick, onMounted, type Ref, ref, watch} from 'vue'\nimport {BvTriggerableEvent} from '../utils'\nimport {useEventListener} from '@vueuse/core'\n\nexport const fadeBaseTransitionProps = {\n  name: 'fade',\n  enterActiveClass: '',\n  enterFromClass: 'showing',\n  enterToClass: '',\n  leaveActiveClass: '',\n  leaveFromClass: '',\n  leaveToClass: 'showing',\n  css: true,\n}\n\ninterface TransitionProps {\n  onBeforeEnter?: (el: Element) => void\n  onEnter?: (el: Element) => void\n  onAfterEnter?: (el: Element) => void\n  onBeforeLeave?: (el: Element) => void\n  onLeave?: (el: Element) => void\n  onAfterLeave?: (el: Element) => void\n  enterToClass?: string\n  leaveToClass?: string\n  enterFromClass?: string\n  leaveFromClass?: string\n  enterActiveClass?: string\n  leaveActiveClass?: string\n}\n\nexport const useShowHide = (\n  modelValue: Ref<boolean | number>,\n  props: {\n    visible?: boolean\n    show?: boolean\n    noAnimation?: boolean\n    noFade?: boolean\n    noCloseOnBackdrop?: boolean\n    noCloseOnEsc?: boolean\n    transitionProps?: TransitionProps\n    lazy?: boolean\n    initialAnimation?: boolean\n    delay?:\n      | number\n      | {\n          show: number\n          hide: number\n        }\n  } & Record<string, unknown>,\n  emit: EmitFn,\n  element: Ref<HTMLElement | null>,\n  computedId: Ref<string>,\n  options: {\n    transitionProps?: TransitionProps\n    showFn?: () => void\n    hideFn?: () => void\n  } = {\n    transitionProps: {},\n    showFn: () => {},\n    hideFn: () => {},\n  }\n) => {\n  let noAction = false\n  const initialShow = (!!modelValue.value && !props.initialAnimation) || props.visible || false\n  const showRef = ref<boolean>(initialShow)\n  const renderRef = ref<boolean>(initialShow)\n  const renderBackdropRef = ref<boolean>(initialShow)\n\n  let isCountdown = typeof modelValue.value !== 'boolean'\n\n  watch(modelValue, () => {\n    isCountdown = typeof modelValue.value !== 'boolean'\n    if (noAction) {\n      noAction = false\n      return\n    }\n    if (modelValue.value) {\n      show()\n    } else {\n      hide()\n    }\n  })\n\n  const localNoAnimation = ref(initialShow)\n  const computedNoAnimation = computed(\n    () => props.noAnimation || props.noFade || localNoAnimation.value || false\n  )\n  onMounted(() => {\n    if (props.visible || (!props.show && initialShow)) {\n      localNoAnimation.value = true\n      if (!modelValue.value) {\n        noAction = true\n        modelValue.value = true\n      }\n      nextTick(() => {\n        isVisible.value = true\n        backdropVisible.value = true\n        backdropReady.value = true\n        show()\n      })\n    } else if (props.show || (!!modelValue.value && props.initialAnimation)) {\n      show()\n    }\n  })\n\n  watch(\n    () => props.visible,\n    (newval) => {\n      localNoAnimation.value = true\n\n      nextTick(() => {\n        if (newval) isVisible.value = true\n        if (newval) {\n          show()\n        } else {\n          hide()\n        }\n      })\n    }\n  )\n  watch(\n    () => props.show,\n    (newval) => {\n      if (newval) {\n        show()\n      } else {\n        hide()\n      }\n    }\n  )\n  useEventListener(element, 'bv-toggle', () => {\n    modelValue.value = !modelValue.value\n  })\n\n  const buildTriggerableEvent = (\n    type: string,\n    opts: Readonly<Partial<BvTriggerableEvent>> = {}\n  ): BvTriggerableEvent =>\n    new BvTriggerableEvent(type, {\n      cancelable: false,\n      target: element?.value || null,\n      relatedTarget: null,\n      trigger: null,\n      ...opts,\n      componentId: computedId?.value,\n    })\n\n  let showTimeout: ReturnType<typeof setTimeout> | undefined\n\n  const show = () => {\n    if (showRef.value) return\n    const event = buildTriggerableEvent('show', {cancelable: true})\n    emit('show', event)\n\n    if (event.defaultPrevented) {\n      emit('show-prevented', buildTriggerableEvent('show-prevented'))\n      if (isVisible.value) {\n        isVisible.value = false\n      }\n      if (modelValue.value && !isCountdown) {\n        noAction = true\n        nextTick(() => {\n          modelValue.value = false\n        })\n      }\n      return\n    }\n    renderRef.value = true\n    renderBackdropRef.value = true\n    requestAnimationFrame(() => {\n      showTimeout = setTimeout(\n        () => {\n          showRef.value = true\n          options.showFn?.()\n          if (!modelValue.value) {\n            noAction = true\n            nextTick(() => {\n              modelValue.value = true\n            })\n          }\n        },\n        localNoAnimation.value\n          ? 0\n          : typeof props.delay === 'number'\n            ? props.delay\n            : props.delay?.show || 0\n      )\n    })\n  }\n\n  const hide = (trigger?: string) => {\n    if (!showRef.value) return\n    const event = buildTriggerableEvent('hide', {cancelable: true, trigger})\n    const event2 = buildTriggerableEvent(trigger || 'ignore', {cancelable: true, trigger})\n    if (\n      (trigger === 'backdrop' && props.noCloseOnBackdrop) ||\n      (trigger === 'esc' && props.noCloseOnEsc)\n    ) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented'))\n      return\n    }\n    if (showTimeout) {\n      clearTimeout(showTimeout)\n      showTimeout = undefined\n    }\n    if (trigger) {\n      emit(trigger, event2)\n    }\n    emit('hide', event)\n\n    if (event.defaultPrevented || event2.defaultPrevented) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented'))\n      noAction = true\n      nextTick(() => {\n        modelValue.value = true\n      })\n      return\n    }\n    setTimeout(\n      () => {\n        showRef.value = false\n        options.hideFn?.()\n        if (modelValue.value) {\n          noAction = true\n          modelValue.value = isCountdown ? 0 : false\n        }\n      },\n      localNoAnimation.value\n        ? 0\n        : typeof props.delay === 'number'\n          ? props.delay\n          : props.delay?.hide || 0\n    )\n  }\n\n  const toggle = () => {\n    const e = buildTriggerableEvent('toggle', {cancelable: true})\n    emit('toggle', e)\n    if (e.defaultPrevented) {\n      emit('toggle-prevented', buildTriggerableEvent('toggle-prevented'))\n      return\n    }\n    if (showRef.value) {\n      hide()\n    } else {\n      show()\n    }\n  }\n\n  const lazyLoadCompleted = ref(false)\n  const markLazyLoadCompleted = () => {\n    if (props.lazy === true) lazyLoadCompleted.value = true\n  }\n\n  const isLeaving = ref(false)\n  const isActive = ref(false)\n  const isVisible = ref(false)\n\n  const onBeforeEnter = (el: Element) => {\n    options.transitionProps?.onBeforeEnter?.(el)\n    props.transitionProps?.onBeforeEnter?.(el)\n    isActive.value = true\n  }\n  const onEnter = (el: Element) => {\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        // sometimes one just isn't enough (offcanvas on the first load after refresh)\n        isVisible.value = true\n      })\n    })\n    options.transitionProps?.onEnter?.(el)\n    props.transitionProps?.onEnter?.(el)\n  }\n  const onAfterEnter = (el: Element) => {\n    emit('shown', buildTriggerableEvent('shown'))\n    markLazyLoadCompleted()\n    options.transitionProps?.onAfterEnter?.(el)\n    props.transitionProps?.onAfterEnter?.(el)\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n  }\n  const onBeforeLeave = (el: Element) => {\n    isLeaving.value = true\n    options.transitionProps?.onBeforeLeave?.(el)\n    props.transitionProps?.onBeforeLeave?.(el)\n  }\n  const onLeave = (el: Element) => {\n    isVisible.value = false\n    options.transitionProps?.onLeave?.(el)\n    props.transitionProps?.onLeave?.(el)\n  }\n  const onAfterLeave = (el: Element) => {\n    emit('hidden', buildTriggerableEvent('hidden'))\n    options.transitionProps?.onAfterLeave?.(el)\n    props.transitionProps?.onAfterLeave?.(el)\n    isLeaving.value = false\n    isActive.value = false\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n    requestAnimationFrame(() => {\n      renderRef.value = false\n    })\n  }\n\n  const contentShowing = computed(\n    () =>\n      isActive.value === true ||\n      props.lazy === false ||\n      (props.lazy === true && lazyLoadCompleted.value === true && props.unmountLazy === false)\n  )\n  const trapActive = ref(false)\n  watch(isVisible, (val) => {\n    setTimeout(() => {\n      trapActive.value = val\n    }, 32)\n  })\n  const backdropVisible = ref(false)\n  const backdropReady = ref(false)\n\n  const transitionFunctions = {\n    ...options.transitionProps,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n  }\n  return {\n    showRef,\n    renderRef,\n    renderBackdropRef,\n    isVisible,\n    isActive,\n    trapActive,\n    show,\n    hide,\n    toggle,\n    buildTriggerableEvent,\n    computedNoAnimation,\n    localNoAnimation,\n    isLeaving,\n    transitionProps: {\n      ...fadeBaseTransitionProps,\n      ...props.transitionProps,\n      ...transitionFunctions,\n    },\n\n    lazyLoadCompleted,\n    markLazyLoadCompleted,\n    contentShowing,\n    backdropReady,\n    backdropVisible,\n    backdropTransitionProps: {\n      ...fadeBaseTransitionProps,\n      onBeforeEnter: () => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            backdropVisible.value = true\n          })\n        })\n        backdropReady.value = false\n      },\n      onAfterEnter: () => {\n        backdropReady.value = true\n      },\n      onBeforeLeave: () => {\n        backdropVisible.value = false\n      },\n      onAfterLeave: () => {\n        backdropReady.value = false\n        requestAnimationFrame(() => {\n          renderBackdropRef.value = false\n        })\n      },\n    },\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}